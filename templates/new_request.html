
{% extends "base.html" %}
{% block title %}Demande de réservation – Véhicules{% endblock %}
{% block content %}
<h1 class="h4">Demande de réservation</h1>
<form method="post">
  {{ form.hidden_tag() }}
  <div class="row">
    <div class="col-md-6 mb-3">{{ form.first_name.label }} {{ form.first_name(class="form-control") }}</div>
    <div class="col-md-6 mb-3">{{ form.last_name.label }} {{ form.last_name(class="form-control") }}</div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">{{ form.start_date.label }} {{ form.start_date(class="form-control") }}</div>
    <div class="col-md-6 mb-3">{{ form.start_slot.label }} {{ form.start_slot(class="form-select") }}</div>
  </div>
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="multiDay">
    <label class="form-check-label" for="multiDay">
      Réservation sur plusieurs jours
    </label>
  </div>
  <div class="form-text mb-3">La date de fin est uniquement nécessaire pour les réservations de plusieurs jours.</div>
  <div id="end_fields" class="row d-none">
    <div class="col-md-6 mb-3">{{ form.end_date.label }} {{ form.end_date(class="form-control") }}</div>
    <div class="col-md-6 mb-3">{{ form.end_slot.label }} {{ form.end_slot(class="form-select") }}</div>
  </div>
  <div class="mb-3">{{ form.purpose.label }} {{ form.purpose(class="form-control") }}</div>
  <div class="form-check mb-3">{{ form.carpool(class="form-check-input") }} {{ form.carpool.label(class="form-check-label") }}</div>
  <div class="mb-3">{{ form.carpool_with.label }} {{ form.carpool_with(class="form-control") }}</div>
  <div class="mb-3">{{ form.notes.label }} {{ form.notes(class="form-control", rows=3) }}</div>
  {{ form.submit(class="btn btn-success") }}
</form>
<script>
  const multiDay = document.getElementById('multiDay');
  const endFields = document.getElementById('end_fields');
  const endDateInput = document.getElementById('end_date');
  const endSlotSelect = document.getElementById('end_slot');
  function toggleEndFields() {
    const enabled = multiDay.checked;
    endFields.classList.toggle('d-none', !enabled);
    endDateInput.disabled = endSlotSelect.disabled = !enabled;
    if (!enabled) {
      endDateInput.value = '';
      endSlotSelect.value = '';
    }
  }
  multiDay.addEventListener('change', toggleEndFields);
  toggleEndFields();
</script>
{% endblock %}
