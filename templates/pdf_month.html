
<!doctype html><html><head><meta charset="utf-8">
<style>
body{font-family:sans-serif;font-size:11px}
table{width:100%;border-collapse:collapse}th,td{border:1px solid #999;padding:3px;vertical-align:top;text-align:center}
.badge{display:inline-block;background:#d1e7dd;border-radius:3px;padding:2px 4px}
th.sticky, td.sticky{position:sticky;left:0;background:#fff}
</style></head><body>
<h1>Planning véhicules — {{ start.strftime("%B %Y") }}</h1>
{% set days = (end - start).days %}
<table>
<thead>
<tr><th class="sticky">Véhicule</th>
{% for i in range(days) %}<th>{{ (start + timedelta(days=i)).strftime("%d") }}</th>{% endfor %}
</tr></thead>
<tbody>
{% for v in vehicles %}
<tr>
<td class="sticky"><strong>{{ v.code }}</strong><br>{{ v.label }}</td>
{% for i in range(days) %}
{% set day = start + timedelta(days=i) %}
<td>
{% for r in reservations if r.vehicle_id==v.id and r.start_at.date() <= day.date() <= r.end_at.date() %}
<span class="badge">{{ slot_label(r, day) }}</span>
{% endfor %}
</td>
{% endfor %}
</tr>
{% endfor %}
</tbody>
</table>
<p style="font-size:10px;color:#666;">Légende: Matin / Après-midi / Journée = Réservé (approuvé)</p>
</body></html>
