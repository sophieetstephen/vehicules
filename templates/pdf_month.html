
<!doctype html><html><head><meta charset="utf-8">
<link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.2/dist/litera/bootstrap.min.css" rel="stylesheet">
<link href="{{ url_for('static', filename='custom.css') }}" rel="stylesheet">
<style>
@page{size:A3 landscape;margin:8mm}
body{font-family:sans-serif;font-size:10px}
table{width:100%;border-collapse:collapse}th,td{border:1px solid #999;padding:2px 3px;vertical-align:top;text-align:center}
th.sticky, td.sticky{position:sticky;left:0;background:#fff}
</style></head><body>
<h1>Planning véhicules — {{ month_year_label(start) }}</h1>
{% set days = (end - start).days %}
<div class="table-responsive">
<table>
<thead>
<tr><th class="sticky">Véhicule</th>
{% for i in range(days) %}<th>{{ (start + timedelta(days=i)).strftime("%d") }}</th>{% endfor %}
</tr></thead>
<tbody>
{% for v in vehicles %}
<tr>
<td class="sticky"><strong>{{ v.code }}</strong><br>{{ v.label }}</td>
{% for i in range(days) %}
{% set day = start + timedelta(days=i) %}
<td>
{% for r in reservations if r.vehicle_id==v.id and r.start_at.date() <= day.date() <= r.end_at.date() %}
<span class="badge text-bg-success">{{ slot_label(r, day) }}</span>
{% endfor %}
</td>
{% endfor %}
</tr>
{% endfor %}
</tbody>
</table>
</div>
<p class="legend-text">Légende: Matin / Après-midi / Journée = Réservé (approuvé)</p>
</body></html>
